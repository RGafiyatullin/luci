types:
  - use: recv_timeout::proto::Hi
    as:  Hi
  - use: recv_timeout::proto::Bye
    as:  Bye

cast:
  - actor
  - dummy

events:
  - id: run for
    delay:
      for: 2m
      step: 500ms

  - id: dummy-says-hi-to-actor
    send:
      from: dummy
      type: Hi
      data:
        literal: ~
    
  - id: actor-says-hi-back
    require: reached
    recv:
      from: actor
      to: dummy
      type: Hi
      data:
        literal: ~
      timeout: 1s100ms
  
  - id: actor-does-no-say-bye-within-15s
    require: unreached
    recv:
      from: actor
      to: dummy
      type: Bye
      data:
        literal: ~
      timeout: 15s

  - id: actor-does-no-say-bye-within-30s
    require: unreached
    recv:
      from: actor
      to: dummy
      type: Bye
      data:
        literal: ~
      timeout: 30s
  
  - id: actor-does-no-say-bye-within-45s
    require: unreached
    recv:
      from: actor
      to: dummy
      type: Bye
      data:
        literal: ~
      timeout: 45s

  - id: actor-says-bye
    require: reached
    recv:
      from: actor
      to: dummy
      type: Bye
      data:
        literal: ~
      timeout: 62s