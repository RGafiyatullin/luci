types:
  - use: recv_timeout::proto::Hi
    as:  Hi
  - use: recv_timeout::proto::Bye
    as:  Bye

actors:
  - actor
dummies:
  - dummy

events:
  - id: run for
    delay:
      for: 2m
      step: 500ms

  - id: dummy-says-hi-to-actor
    send:
      from: dummy
      type: Hi
      data:
        literal: ~
    
  - id: actor-says-hi-back
    require: reached
    recv:
      from: actor
      to: dummy
      type: Hi
      data: ~
      after: 900ms
      before: 1s100ms
  
  - id: actor-does-not-say-bye-within-15s
    require: unreached
    recv:
      from: actor
      to: dummy
      type: Bye
      data: ~
      after: 10s
      before: 20s

  - id: actor-does-not-say-bye-within-30s
    require: unreached
    recv:
      from: actor
      to: dummy
      type: Bye
      data: ~
      after: 20s
      before: 30s
  
  - id: actor-does-not-say-bye-within-45s
    require: unreached
    recv:
      from: actor
      to: dummy
      type: Bye
      data: ~
      after: 40s
      before: 50s

  - id: actor-says-bye
    require: unreached
    recv:
      from: actor
      to: dummy
      type: Bye
      data: ~
      after: 65s
      before: 70s